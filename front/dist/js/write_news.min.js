function News(){}News.prototype.uploadimage=function(){var n=$("#upload-btn");n.change(function(){var e=n[0].files[0],t=new FormData;t.append("file",e),xfzajax.post({url:"/cms/upload/",data:t,processData:!1,contentType:!1,success:function(e){if(200===e.code){var t=e.data.url;$("#thumbnail_url").val(t)}}})})},News.prototype.initUeditor=function(){window.ue=UE.getEditor("editor",{initialFrameHeight:400,serverUrl:"/ueditor/upload/"})},News.prototype.publish_news=function(){var c=$("#publish_btn");c.click(function(e){e.preventDefault();var t=$('input[name="title"]').val(),n=$('select[name="category"]').val(),o=$('input[name="desc"]').val(),a=$('input[name="thumbnail"]').val(),i=window.ue.getContent(),l="",s=c.attr("data-news-id");l=s?"/cms/edit/111":"/cms/write_articles/",xfzajax.post({url:l,data:{pk:s,title:t,category:n,desc:o,thumbnail:a,content:i},success:function(e){200===e.code?s?xfzalert.alertSuccess("修改新闻成功！",function(){window.location.reload()}):(console.log(l),xfzalert.alertSuccess("发布新闻成功！",function(){window.location.reload()})):(console.log(e.message),console.log(e.code))}})})},News.prototype.run=function(){self=this,self.uploadimage(),self.initUeditor(),self.publish_news()},$(function(){(new News).run()});