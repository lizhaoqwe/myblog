function News(){}News.prototype.uploadimage=function(){var n=$("#upload-btn");n.change(function(){var e=n[0].files[0],t=new FormData;t.append("file",e),xfzajax.post({url:"/cms/upload/",data:t,processData:!1,contentType:!1,success:function(e){if(200===e.code){var t=e.data.url;$("#thumbnail_url").val(t)}}})})},News.prototype.initUeditor=function(){window.ue=UE.getEditor("editor",{initialFrameHeight:400,serverUrl:"/ueditor/upload/"})},News.prototype.publish_news=function(){var s=$("#publish_btn");s.click(function(e){e.preventDefault();var t=$('input[name="title"]').val(),n=$('select[name="category"]').val();console.log(n);var a=$('input[name="desc"]').val(),o=$('input[name="thumbnail"]').val(),i=window.ue.getContent(),l="",c=s.attr("data-news-id");l=c?"/cms/edit/111":"/cms/write_articles/",xfzajax.post({url:l,data:{pk:c,title:t,category:n,desc:a,thumbnail:o,content:i},success:function(e){200===e.code?c?xfzalert.alertSuccess("修改新闻成功！",function(){window.location.reload()}):xfzalert.alertSuccess("发布新闻成功！",function(){window.location.reload()}):console.log(e.code)}})})},News.prototype.run=function(){self=this,self.uploadimage(),self.initUeditor(),self.publish_news()},$(function(){(new News).run()});